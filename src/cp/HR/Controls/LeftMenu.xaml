<local:NavCtl x:Class="HR.Controls.LeftMenu"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:HR.Controls"
             xmlns:utils="clr-namespace:HR.Utilities"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
    <local:NavCtl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Res/TopMenuStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <utils:PageToIsCheckedConverter x:Key="CheckedConverter" />
            <utils:PageToIsEnabledConverter x:Key="EnabledConverter" />
            <BooleanToVisibilityConverter x:Key="BoolToVis" />
            <utils:InverseBoolToVisibilityConverter x:Key="InverseBoolToVis" />
        </ResourceDictionary>
    </local:NavCtl.Resources>
    <StackPanel>
        <local:IconHighlightButton Click="OpenMenu" ToolTip="Открыть меню"
               Visibility="{Binding IsOpen, Converter={StaticResource InverseBoolToVis}}"
               >
            <StackPanel>
                <Viewbox Stretch="Fill" Width="20" Height="20">
                    <Path Fill="Beige"
                          Data="M16 132h416c8.8 0 16-7.2 16-16V76c0-8.8-7.2-16-16-16H16C7.2 60 0 67.2 0 76v40c0 8.8 7.2 16 16 16zm0 160h416c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16H16c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zm0 160h416c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16H16c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16z"/>
                </Viewbox>
            </StackPanel>
        </local:IconHighlightButton>
        <local:IconHighlightButton Click="CloseMenu" ToolTip="Закрыть меню"
               Visibility="{Binding IsOpen, Converter={StaticResource BoolToVis}}">
            <StackPanel>
                <Viewbox Stretch="Fill" Width="20" Height="20">
                    <Path Fill="Beige"
                  Data="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
                </Viewbox>
            </StackPanel>
        </local:IconHighlightButton>
        <Popup x:Name="SideMenuPopup" Placement="Bottom" StaysOpen="False"
               AllowsTransparency="True" PopupAnimation="Fade"
               HorizontalOffset="0" VerticalOffset="5"
               >
            <Border Background="{StaticResource baseBackgroundBrush}"
                    CornerRadius="3" Padding="2" Margin="5" SnapsToDevicePixels="True">
                <Border.Effect>
                    <DropShadowEffect Color="Gray" Direction="270" ShadowDepth="4" BlurRadius="8" Opacity="0.3" />
                </Border.Effect>
                <Menu Style="{StaticResource VerticalMenuStyle}">
                    <MenuItem Header="_Главная" Style="{StaticResource MenuItemStyle}"
                              IsEnabled="{Binding CurrentPage, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource EnabledConverter}, ConverterParameter=HomePg}"
                              Command="NavigationCommands.GoToPage"
                              CommandParameter="Pages/HomePg.xaml"
                              CommandTarget="{Binding ElementName=mainFrame}"
                              />
                    <MenuItem Header="_Сотрудники" Style="{StaticResource MenuItemStyle}"
                              IsChecked="{Binding CurrentPage, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource CheckedConverter}, ConverterParameter='WorkersPg'}"
                              Command="NavigationCommands.GoToPage"
                              CommandParameter="Pages/WorkersPg.xaml"
                              CommandTarget="{Binding ElementName=mainFrame}"
                              >
                        <MenuItem.Icon>
                            <Viewbox Height="16" Width="16" ToolTip="Сотрудники">
                                <Canvas Height="512" Width="512">
                                    <Path Fill="#26a0da" Data="M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z">
                                        <Path.RenderTransform>
                                            <TranslateTransform X="0" Y="0"/>
                                        </Path.RenderTransform>
                                    </Path>
                                </Canvas>
                            </Viewbox>
                        </MenuItem.Icon>
                        <MenuItem Header="_Руководство" Style="{StaticResource SubMenuItemStyle}">
                            <MenuItem.Icon>
                                <Viewbox Width="20" Height="20">
                                    <Path Fill="#26a0da" Data="M10,2 L2,10 L10,18 L18,10 Z"/>
                                </Viewbox>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="_Учителя" Style="{StaticResource SubMenuItemStyle}" />
                        <MenuItem Header="П_едагоги" Style="{StaticResource SubMenuItemStyle}" />
                        <MenuItem Header="Вспо_могательный персонал" Style="{StaticResource SubMenuItemStyle}" />
                    </MenuItem>
                </Menu>
            </Border>
        </Popup>
    </StackPanel>
</local:NavCtl>
